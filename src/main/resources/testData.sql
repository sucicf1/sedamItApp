SET DB_CLOSE_DELAY -1;        
;             
CREATE USER IF NOT EXISTS SA SALT '0cdce072415911bd' HASH 'f3317ef6050b1d2df9d64bcaf03c2ed8ffbca102e05a6ee3403ee9a482a8743a' ADMIN;           
CREATE SEQUENCE PUBLIC.SYSTEM_SEQUENCE_4A998D4F_B269_486A_ABBB_B9FCD9625294 START WITH 6 BELONGS_TO_TABLE;    
CREATE SEQUENCE PUBLIC.SYSTEM_SEQUENCE_25A8F5B9_DB24_4FAE_9420_86F4D1446C16 START WITH 2 BELONGS_TO_TABLE;    
CREATE MEMORY TABLE PUBLIC.BILL(
    ID BIGINT DEFAULT (NEXT VALUE FOR PUBLIC.SYSTEM_SEQUENCE_4A998D4F_B269_486A_ABBB_B9FCD9625294) NOT NULL NULL_TO_DEFAULT SEQUENCE PUBLIC.SYSTEM_SEQUENCE_4A998D4F_B269_486A_ABBB_B9FCD9625294,
    AMOUNT FLOAT NOT NULL,
    MONTH INTEGER NOT NULL,
    STATUS BOOLEAN NOT NULL,
    SERVICE_EXTERN_ID BIGINT
);  
ALTER TABLE PUBLIC.BILL ADD CONSTRAINT PUBLIC.CONSTRAINT_1 PRIMARY KEY(ID);   
-- 5 +/- SELECT COUNT(*) FROM PUBLIC.BILL;    
INSERT INTO PUBLIC.BILL(ID, AMOUNT, MONTH, STATUS, SERVICE_EXTERN_ID) VALUES
(1, 150.0, 10, TRUE, 10),
(2, 100.0, 11, FALSE, 10),
(3, 120.0, 12, FALSE, 10),
(4, 500.0, 10, TRUE, 4),
(5, 520.0, 11, FALSE, 4);          
CREATE MEMORY TABLE PUBLIC.SERVICE(
    EXTERN_ID BIGINT NOT NULL,
    NAME VARCHAR(255),
    USER_ID BIGINT
);           
ALTER TABLE PUBLIC.SERVICE ADD CONSTRAINT PUBLIC.CONSTRAINT_A PRIMARY KEY(EXTERN_ID);         
-- 2 +/- SELECT COUNT(*) FROM PUBLIC.SERVICE; 
INSERT INTO PUBLIC.SERVICE(EXTERN_ID, NAME, USER_ID) VALUES
(4, 'electricity', 1),
(10, 'water', 1);        
CREATE MEMORY TABLE PUBLIC.USER(
    ID BIGINT DEFAULT (NEXT VALUE FOR PUBLIC.SYSTEM_SEQUENCE_25A8F5B9_DB24_4FAE_9420_86F4D1446C16) NOT NULL NULL_TO_DEFAULT SEQUENCE PUBLIC.SYSTEM_SEQUENCE_25A8F5B9_DB24_4FAE_9420_86F4D1446C16,
    ADDRESS VARCHAR(255),
    ADDRESS_BILL VARCHAR(255),
    EMAIL VARCHAR(255),
    NAME VARCHAR(255),
    PASSWORD VARCHAR(255),
    PHONE VARCHAR(255),
    SURNAME VARCHAR(255),
    USERNAME VARCHAR(255)
);
ALTER TABLE PUBLIC.USER ADD CONSTRAINT PUBLIC.CONSTRAINT_2 PRIMARY KEY(ID);   
-- 1 +/- SELECT COUNT(*) FROM PUBLIC.USER;    
INSERT INTO PUBLIC.USER(ID, ADDRESS, ADDRESS_BILL, EMAIL, NAME, PASSWORD, PHONE, SURNAME, USERNAME) VALUES
(1, '', '', '', '', '$2a$10$S7R7r6bpJoyTKkwSwQtWAeMH.0KKzOybQRlmJKPEdP9dYU85U9c92', '', '', 'mate');              
ALTER TABLE PUBLIC.BILL ADD CONSTRAINT PUBLIC.FKD7FWPKGBXBP5FWE54V54LLXBM FOREIGN KEY(SERVICE_EXTERN_ID) REFERENCES PUBLIC.SERVICE(EXTERN_ID) NOCHECK;        
ALTER TABLE PUBLIC.SERVICE ADD CONSTRAINT PUBLIC.FK21KEFIM0CVFXUD7LRCNXCTQ9R FOREIGN KEY(USER_ID) REFERENCES PUBLIC.USER(ID) NOCHECK;         
